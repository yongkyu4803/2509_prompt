import dotenv from 'dotenv';
import path from 'path';

// .env.local 파일 로드
dotenv.config({ path: path.join(process.cwd(), '.env.local') });

import { PromptService } from '../src/lib/database';

// 국정감사 전용 프롬프트 데이터
const AUDIT_PROMPTS = [
  // Chapter 1 기반 프롬프트 3개 (이미 추가됨)
  // Chapter 2 기반 프롬프트 3개
  {
    title: '다단계 문서 요약 시스템',
    description: '방대한 국정감사 자료를 초벌-정밀-핵심의 3단계로 체계적으로 요약하여 핵심 쟁점을 도출하는 전문 도구',
    content: `# 다단계 문서 요약 시스템

**역할**: 당신은 방대한 자료를 효율적으로 처리하는 전문 분석가입니다. 국정감사 자료를 체계적으로 요약하여 핵심 정보만을 추출합니다.

## 📋 기본 설정

**요약할 문서**: [문서 업로드 또는 텍스트 입력]

**문서 유형**: 
- [ ] 정책 보고서 
- [ ] 예산 관련 자료
- [ ] 감사원 지적사항
- [ ] 국정감사 답변서
- [ ] 언론 보도자료
- [ ] 기타: [직접 입력]

**요약 목적**:
- [ ] 질의서 작성 준비
- [ ] 현황 파악
- [ ] 문제점 도출
- [ ] 정책 분석
- [ ] 기타: [직접 입력]

**긴급도**: 
- [ ] 즉시 (핵심만 빠르게)
- [ ] 일반 (체계적 요약)
- [ ] 정밀 (상세 분석)

## 1단계: 초벌 요약 (문서 전체 파악)

### 📊 기본 문서 정보
- **문서명**: [제목 추출]
- **발행기관**: [작성 기관/부처]
- **발행일자**: [날짜]
- **페이지 수**: [총 페이지]
- **문서 성격**: [보고서/답변서/자료집 등]

### 🎯 핵심 내용 개괄 (3-5문장)
[문서의 전체적인 내용을 간단히 요약]

### 📌 주요 구성 요소
1. **주제 영역**: [다루는 정책/사업 분야]
2. **핵심 수치**: [중요한 예산, 성과지표, 통계]
3. **이해관계자**: [관련 기관, 대상 집단]
4. **시간적 범위**: [다루는 기간]

## 2단계: 정밀 요약 (쟁점별 심화 분석)

### A. 주요 정책/사업별 분석

**[정책/사업명 1]**
- **목적**: [정책 목표]
- **내용**: [주요 추진 내용]
- **예산**: [관련 예산 규모]
- **성과**: [달성 성과 또는 진행 상황]
- **문제점**: [드러난 문제나 한계]

**[정책/사업명 2]**
[동일 형식으로 분석]

**[정책/사업명 3]**
[동일 형식으로 분석]

### B. 핵심 수치 및 통계 정리

| 구분 | 계획 | 실행 | 달성률 | 특이사항 |
|------|------|------|--------|----------|
| [항목1] | [수치] | [수치] | [%] | [특이점] |
| [항목2] | [수치] | [수치] | [%] | [특이점] |
| [항목3] | [수치] | [수치] | [%] | [특이점] |

### C. 문제점 및 개선사항

**🚨 즉시 검토 필요 사항**
1. [심각한 문제점이나 법령 위반 소지]
2. [예산 낭비나 비효율적 집행]
3. [정책 목표 대비 현저한 성과 미달]

**⚠️ 개선 검토 사항**
1. [효율성 개선이 필요한 분야]
2. [제도 개선이 필요한 영역]
3. [타 기관과의 조정이 필요한 사항]

**ℹ️ 참고 사항**
1. [일반적인 현황 정보]
2. [향후 계획]
3. [기타 참고할 만한 내용]

## 3단계: 핵심 요약 (국감 질의 포인트 도출)

### 🎯 TOP 3 질의 포인트

**1순위: [핵심 쟁점 제목]**
- **문제점**: [구체적 문제 상황]
- **근거자료**: [해당 페이지나 수치]
- **질의 방향**: [어떤 관점에서 질문할지]
- **예상 질문**: "○○에 대해 ○○한 문제가 있는데, 이에 대한 해명을 바랍니다."

**2순위: [핵심 쟁점 제목]**
- **문제점**: [구체적 문제 상황]
- **근거자료**: [해당 페이지나 수치]
- **질의 방향**: [어떤 관점에서 질문할지]
- **예상 질문**: [질문 예시]

**3순위: [핵심 쟁점 제목]**
- **문제점**: [구체적 문제 상황]
- **근거자료**: [해당 페이지나 수치]
- **질의 방향**: [어떤 관점에서 질문할지]  
- **예상 질문**: [질문 예시]

### 📋 추가 검토 사항 (4-10순위)
- [간단한 쟁점 목록과 핵심 포인트]

### 🔍 팩트체크 필요 항목
- **수치 검증**: [의심스러운 통계나 계산]
- **법령 확인**: [법적 근거가 필요한 사항]
- **타 기관 자료**: [교차 확인이 필요한 내용]

## 4단계: 후속 조치 가이드

### 📎 추가 요구 자료 목록
1. **필수**: [반드시 확보해야 할 상세 자료]
2. **우선**: [있으면 좋을 보완 자료]
3. **참고**: [추가 검토용 자료]

### 🔗 연관 검토 사항
- **관련 법령**: [확인해야 할 법률/시행령]
- **타 부처 연관성**: [협조나 확인이 필요한 타 기관]
- **과거 지적사항**: [감사원이나 국감에서 기 지적된 유사 사안]

### 📅 질의서 작성 전략
- **배경 설명**: [상황 설명에 활용할 내용]
- **핵심 공격포인트**: [집중 질의할 부분]
- **대안 제시**: [건설적 개선 방안]

---

## 🎛️ 사용자 맞춤 설정

**요약 스타일 선택**:
- [ ] 간결형: 핵심만 bullet point로
- [ ] 상세형: 맥락과 배경 포함
- [ ] 질의형: 질문 중심으로 구성
- [ ] 분석형: 문제점과 대안 중심

**출력 형식 선택**:
- [ ] 텍스트 요약문
- [ ] 표와 차트 중심  
- [ ] 질의서 초안 형태
- [ ] PPT 슬라이드 구성안

---

**사용 가이드**:
1. 문서를 업로드하거나 텍스트를 입력하고 기본 설정을 선택하세요
2. AI가 3단계에 걸쳐 체계적으로 요약을 진행합니다
3. 각 단계별 결과를 검토하고 필요시 심화 분석을 요청하세요
4. 최종 핵심 요약을 바탕으로 국정감사 전략을 수립하세요`,
    category: 'analysis',
    usageHours: 0,
    isFavorite: false,
    tags: ['문서요약', '다단계분석', '국정감사', '체계적분석', '핵심추출'],
  },

  {
    title: '핵심 쟁점 추출 도구',
    description: '방대한 자료 속에서 국정감사에 활용할 수 있는 핵심 쟁점과 질의 포인트를 자동으로 발굴하는 전문 도구',
    content: `# 핵심 쟁점 추출 도구

**역할**: 당신은 숨겨진 이슈를 발굴하는 탐사 전문가입니다. 방대한 자료에서 국정감사에 활용할 핵심 쟁점을 찾아내는 전문가입니다.

## 🎯 분석 대상 설정

**분석할 자료**: [문서 업로드 또는 내용 입력]

**분석 범위**:
- [ ] 단일 문서 내 쟁점 발굴
- [ ] 복수 문서 간 비교 분석  
- [ ] 시계열 변화 추이 분석
- [ ] 타 기관 자료와 교차 검증

**감사 관점**:
- [ ] 예산 집행의 적정성
- [ ] 정책 효과성
- [ ] 법령 준수 여부
- [ ] 행정 효율성
- [ ] 국민 서비스 품질

## 1단계: 기본 쟁점 스캐닝

### A. 자동 키워드 추출

**빈도 높은 핵심 키워드 (TOP 10)**
1. [키워드] - 언급 빈도: [N회]
2. [키워드] - 언급 빈도: [N회]
3. [키워드] - 언급 빈도: [N회]
...

**주목할 만한 특수 키워드**
- **급증/급감 관련**: [성장, 감소, 증가, 하락 등과 함께 언급되는 사항]
- **문제 관련**: [어려움, 한계, 부족, 문제, 개선 등과 함께 언급되는 사항]
- **예산 관련**: [예산, 비용, 지출, 절약, 효율 등과 함께 언급되는 사항]

### B. 의심스러운 표현 탐지

**🚨 주의 깊게 볼 표현들**
- "어려움이 있으나", "한계는 있지만", "미흡한 부분이 있으나"
- "검토 중", "추진 예정", "계획하고 있음"  
- "노력하고 있습니다", "최선을 다하고 있습니다"
- "외부 요인으로 인해", "예상치 못한 상황으로"

**📊 수치 관련 의심점**
- 이전 대비 급격한 변화가 있는 수치
- 목표 대비 현저한 차이가 나는 실적
- 다른 기관 자료와 상이한 수치
- 구체적 근거 없이 제시된 추상적 수치

## 2단계: 심화 쟁점 분석

### A. 카테고리별 쟁점 분류

**💰 예산/재정 쟁점**
- **과다 책정**: [예산이 과도하게 편성된 사업]
- **집행 저조**: [예산 대비 집행률이 낮은 분야]
- **효율성 문제**: [투입 대비 성과가 낮은 사업]
- **중복 투자**: [유사한 목적의 사업 중복]

**📈 성과/효과성 쟁점**
- **목표 미달성**: [당초 목표 대비 성과 부족]
- **부작용 발생**: [정책 추진 과정에서 발생한 문제점]
- **효과 검증 미흡**: [성과 측정 방식의 문제]
- **지속가능성 의문**: [장기적 효과에 대한 우려]

**⚖️ 법령/제도 쟁점**  
- **법령 위반 소지**: [관련 법규 준수 여부]
- **제도적 한계**: [현행 제도의 구조적 문제]
- **규정 미비**: [필요한 규정이나 기준 부족]
- **형평성 문제**: [공정성이나 형평성 관련 이슈]

**🏛️ 조직/관리 쟁점**
- **관리 체계 미흡**: [업무 추진 체계의 문제]
- **인력 부족/과다**: [적정 인력 운영 관련]
- **전문성 부족**: [업무 수행 역량 관련]
- **소통 부족**: [관련 기관 간 협조체계]

### B. 쟁점별 심각도 평가

| 쟁점 | 심각도 | 시급성 | 개선가능성 | 정치적 파급력 | 종합점수 |
|------|--------|--------|------------|---------------|----------|
| [쟁점1] | 상/중/하 | 상/중/하 | 상/중/하 | 상/중/하 | [점수] |
| [쟁점2] | 상/중/하 | 상/중/하 | 상/중/하 | 상/중/하 | [점수] |
| [쟁점3] | 상/중/하 | 상/중/하 | 상/중/하 | 상/중/하 | [점수] |

## 3단계: 질의 포인트 개발

### 🎯 TOP 5 핵심 쟁점

**1순위: [쟁점 제목]**
- **핵심 문제**: [구체적 문제 상황]
- **근거 자료**: [관련 페이지, 수치, 출처]
- **관련 법령**: [해당되는 법률이나 규정]
- **피해/영향**: [국민이나 사회에 미치는 영향]
- **책임 소재**: [관련 기관이나 담당자]
- **개선 방향**: [구체적 해결 방안]

**예상 질의 시나리오**:
- 도입 질문: "○○ 현황이 어떻게 되는지 말씀해 주시기 바랍니다."
- 핵심 질문: "그런데 자료를 보니 ○○한 문제가 있는데, 이에 대해 어떻게 생각하십니까?"
- 추궁 질문: "그렇다면 ○○에 대한 책임은 누구에게 있다고 보십니까?"
- 대안 질문: "앞으로 이런 문제가 재발하지 않으려면 어떤 조치가 필요할까요?"

**2순위: [쟁점 제목]**
[동일한 형식으로 분석]

**3순위: [쟁점 제목]**
[동일한 형식으로 분석]

**4순위: [쟁점 제목]**
[동일한 형식으로 분석]

**5순위: [쟁점 제목]**
[동일한 형식으로 분석]

### 📝 추가 검토 쟁점 (6-15순위)
- [쟁점 제목]: [간단한 설명과 질의 방향]
- [쟁점 제목]: [간단한 설명과 질의 방향]
- [쟁점 제목]: [간단한 설명과 질의 방향]

## 4단계: 전략적 질의 구성

### A. 질의 순서 전략

**1단계 - 현황 확인 질의** (분위기 조성)
- 기본적인 현황과 성과 확인
- 긍정적 측면도 일부 언급하여 균형 유지

**2단계 - 문제점 지적 질의** (본격 추궁)
- 구체적 근거를 바탕으로 문제점 지적
- 수치와 사실 중심의 객관적 접근

**3단계 - 책임 소재 확인** (압박 강화)  
- 문제에 대한 책임 소재 명확화
- 관련 법령이나 규정 위반 여부 확인

**4단계 - 개선 방안 요구** (건설적 마무리)
- 구체적인 개선 계획과 일정 요구
- 재발 방지 대책 마련 요구

### B. 예상 답변 및 재반박 준비

**예상 답변 패턴별 대응**

**"외부 요인" 핑계형 답변**
- 재반박: "그렇다면 외부 요인을 사전에 예측하고 대비하지 못한 것은 누구의 책임입니까?"

**"최선을 다했다" 변명형 답변**  
- 재반박: "최선을 다한 결과가 이 정도라면, 애초 계획 자체에 문제가 있었던 것 아닙니까?"

**"법적 근거 부족" 회피형 답변**
- 재반박: "법적 근거가 부족하다면 왜 관련 법령 정비를 하지 않았습니까?"

**"예산 부족" 해명형 답변**
- 재반박: "그렇다면 한정된 예산을 더 효율적으로 사용할 방안은 검토했습니까?"

## 5단계: 후속 조치 계획

### 🔍 추가 검증 필요 사항
- **팩트체크 항목**: [확인이 필요한 수치나 사실]
- **법령 검토 사항**: [관련 법규 해석이 필요한 부분]
- **전문가 자문**: [기술적 검토가 필요한 분야]

### 📎 추가 자료 요구 목록
1. **필수 자료**: [질의에 꼭 필요한 상세 자료]
2. **보완 자료**: [질의 보강을 위한 추가 정보]
3. **비교 자료**: [타 기관이나 해외 사례 비교용]

### 📊 언론 및 여론 대응
- **보도자료 포인트**: [언론 발표 시 강조할 내용]
- **여론 설득 논리**: [국민들이 이해하기 쉬운 설명]
- **정치적 효과**: [의정활동 성과로 부각할 부분]

---

**사용 가이드**:
1. 분석할 자료를 업로드하고 분석 범위와 관점을 설정하세요
2. AI가 4단계에 걸쳐 체계적으로 쟁점을 추출하고 분석합니다
3. 추출된 쟁점별로 우선순위와 질의 전략을 검토하세요
4. 예상 답변과 재반박 시나리오를 숙지하고 질의에 활용하세요`,
    category: 'analysis',
    usageHours: 0,
    isFavorite: false,
    tags: ['쟁점추출', '이슈발굴', '질의포인트', '국정감사', '문제점분석'],
  },

  {
    title: '출처 추적 요약 시스템',
    description: '요약 내용의 원문 출처를 자동으로 표기하여 팩트체크와 근거 확인이 용이한 신뢰성 높은 요약 도구',
    content: `# 출처 추적 요약 시스템

**역할**: 당신은 정확성과 신뢰성을 중시하는 분석 전문가입니다. 모든 요약 내용에 대해 정확한 출처를 표기하여 검증 가능한 요약문을 제작합니다.

## 📚 문서 등록 및 설정

**분석 대상 문서**: [문서 업로드 또는 내용 입력]

**문서 기본 정보**:
- **제목**: [문서명]
- **작성기관**: [발행 기관]
- **작성일자**: [날짜]
- **총 페이지**: [페이지 수]
- **문서 유형**: [보고서/답변서/자료집 등]

**출처 표기 방식 선택**:
- [ ] 페이지 번호 표기 (예: p.15)
- [ ] 섹션별 표기 (예: 제2장, 3절)
- [ ] 문단 번호 표기 (예: 2-3-1)
- [ ] 혼합 표기 (페이지+섹션)

**요약 목적**:
- [ ] 국정감사 질의서 작성
- [ ] 보고서 브리핑 자료
- [ ] 쟁점 분석 자료
- [ ] 팩트체크 검증 자료

## 1단계: 구조화된 요약 (출처 명시)

### 📋 문서 개요
**전체 내용 요약** (3-5문장)
[문서의 핵심 내용을 간략히 요약]
*출처: [전체 문서]*

### 🎯 주요 구성 요소

**1. 정책/사업 목적**
[정책의 목적과 배경]
*출처: p.[페이지번호] 또는 [해당 섹션]*

**2. 추진 내용**  
[주요 추진 사항]
*출처: p.[페이지번호] 또는 [해당 섹션]*

**3. 예산 규모**
[관련 예산 정보]
*출처: p.[페이지번호] 또는 [해당 섹션]*

**4. 성과 및 실적**
[달성 성과나 현재 진행 상황]
*출처: p.[페이지번호] 또는 [해당 섹션]*

## 2단계: 핵심 내용 상세 요약

### A. 주요 정책별 분석

**[정책명 1]** 
- **목적**: [정책 목표]
  *출처: p.[페이지번호]*
- **내용**: [구체적 추진 내용]
  *출처: p.[페이지번호]*  
- **예산**: [예산 규모와 집행 현황]
  *출처: p.[페이지번호]*
- **성과**: [측정된 성과나 지표]
  *출처: p.[페이지번호]*

**[정책명 2]**
[동일한 형식으로 출처 표기]

### B. 핵심 수치 및 통계

| 항목 | 수치 | 출처 | 비고 |
|------|------|------|------|
| [지표명] | [수치] | p.[페이지] | [특이사항] |
| [지표명] | [수치] | p.[페이지] | [특이사항] |
| [지표명] | [수치] | p.[페이지] | [특이사항] |

## 3단계: 문제점 및 쟁점 (근거 명시)

### 🚨 심각한 문제점

**1. [문제점 제목]**
- **문제 상황**: [구체적 문제 내용]
  *출처: p.[페이지번호], [정확한 문구 인용]*
- **관련 수치**: [수치적 근거]
  *출처: p.[페이지번호]*
- **법적 근거**: [관련 법령이나 규정]
  *출처: p.[페이지번호] 또는 [외부 법령]*

**2. [문제점 제목]**
[동일한 형식으로 출처 표기]

### ⚠️ 개선 필요 사항

**1. [개선 사항 제목]**
- **현재 상황**: [현황 설명]
  *출처: p.[페이지번호]*
- **문제점**: [무엇이 문제인지]
  *출처: p.[페이지번호]*
- **개선 방향**: [제시된 개선안이나 대안]
  *출처: p.[페이지번호]*

## 4단계: 질의 포인트 개발 (근거 자료 첨부)

### 🎯 핵심 질의 사항

**질의 1: [질의 제목]**
- **질의 배경**: [왜 이 질문을 하는지]
  *관련 출처: p.[페이지번호]*
- **핵심 질문**: "○○에 대해 ○○한 상황인데, 이에 대한 해명을 바랍니다."
- **근거 자료**: 
  - "문서 p.[페이지]에 따르면 '[정확한 인용구]'라고 되어 있는데..."
  - "같은 보고서 p.[페이지]에서는 '[또 다른 인용구]'라고 하고 있습니다."
- **예상 추가 질문**: [후속 질문 시나리오]

**질의 2: [질의 제목]**
[동일한 형식으로 구성]

**질의 3: [질의 제목]**  
[동일한 형식으로 구성]

## 5단계: 검증 및 교차 확인

### 🔍 팩트체크 체크리스트

**수치 검증**
- [ ] 모든 수치의 출처 확인: [확인 완료된 항목들]
- [ ] 계산 검증: [덧셈, 비율 등 계산 재확인]
- [ ] 시점 확인: [수치의 기준 시점 명시]

**인용문 검증**  
- [ ] 정확한 인용: [원문과 인용문 대조]
- [ ] 문맥 확인: [인용이 전체 맥락과 일치하는지]
- [ ] 해석 적정성: [인용문 해석이 과도하지 않은지]

**출처 표기 정확성**
- [ ] 페이지 번호 정확성: [모든 페이지 번호 재확인]
- [ ] 섹션 표기 정확성: [장, 절 표기 확인]
- [ ] 외부 자료 출처: [법령, 타 기관 자료 등]

### 📊 신뢰도 평가

| 구분 | 확인 항목 | 검증 결과 | 신뢰도 |
|------|-----------|-----------|--------|
| 주요 수치 | 출처 명시 여부 | ✓/✗ | 높음/중간/낮음 |
| 핵심 주장 | 근거 자료 존재 | ✓/✗ | 높음/중간/낮음 |
| 인용문 | 정확성 확인 | ✓/✗ | 높음/중간/낮음 |

## 6단계: 최종 검증 보고서

### 📋 요약 품질 보고

**출처 표기 현황**
- 총 [N]개의 출처 표기
- 페이지 번호 표기: [N]개
- 섹션 표기: [N]개  
- 외부 자료: [N]개

**검증 완료 사항**
- ✅ 모든 수치의 출처 확인
- ✅ 주요 인용문의 정확성 검증
- ✅ 페이지 번호 재확인
- ✅ 법령/규정 근거 확인

**주의사항**
- ⚠️ 추가 확인이 필요한 사항: [목록]
- ⚠️ 해석에 주의가 필요한 부분: [목록]
- ⚠️ 원문 대조가 권장되는 부분: [목록]

### 🔗 참고 자료 목록

**주요 출처**
1. [문서명] - p.[페이지 범위]
2. [관련 법령명] - [조항]
3. [타 기관 자료] - [출처 정보]

**검증용 추가 자료**
- [확인이 필요한 외부 자료 목록]
- [교차 검증 가능한 참고 문서]

---

## 🎛️ 사용자 설정 옵션

**출처 표기 세부 설정**:
- [ ] 페이지별 요약 (각 페이지마다 별도 요약)
- [ ] 주제별 요약 (주제별로 관련 출처 통합)
- [ ] 시간순 요약 (시간 흐름에 따른 출처 정리)

**검증 수준 선택**:
- [ ] 기본 검증: 출처 표기 및 페이지 확인
- [ ] 정밀 검증: 인용문 정확성까지 확인  
- [ ] 완전 검증: 모든 수치와 사실 관계 재확인

---

**사용 가이드**:
1. 문서를 업로드하고 출처 표기 방식을 선택하세요
2. AI가 모든 요약 내용에 정확한 출처를 표기합니다
3. 검증 체크리스트를 통해 신뢰도를 확인하세요
4. 질의서 작성 시 근거 자료로 출처 정보를 활용하세요
5. 중요한 사항은 반드시 원문을 직접 확인하세요`,
    category: 'analysis',
    usageHours: 0,
    isFavorite: false,
    tags: ['출처추적', '팩트체크', '검증시스템', '신뢰성', '근거자료'],
  },

  {
    title: '국정감사 문서 자동 분류 시스템',
    description: '대량 국정감사 자료를 주제별/우선순위별로 자동 분류하고, 감사 포인트를 추출하는 체계적 분류 도구',
    content: `# 국정감사 문서 자동 분류 시스템

**역할**: 당신은 20년 경력의 국정감사 전문 분석가입니다. 방대한 자료를 효율적으로 분류하고 핵심 감사 포인트를 도출하는 전문가입니다.

## 1단계: 기본 문서 정보 수집
다음 정보를 바탕으로 문서를 분석해주세요:

**업로드된 문서/자료**: [문서 내용 또는 파일]

**감사 대상**: [해당 부처/기관명]

**감사 분야**: [예: 예산집행, 정책효과성, 사업관리 등]

**감사 기간**: [해당 연도 또는 기간]

## 2단계: 자동 분류 체계

### A. 중요도별 분류 (상/중/하)
각 문서 내용을 다음 기준으로 분류:

**상(高) - 즉시 검토 필요**
- 예산 집행 오류나 불법 사용 의혹
- 정책 목표 대비 현저한 성과 미달
- 법령 위반 소지가 있는 사안
- 국민 안전이나 공익에 직결되는 문제
- 언론/국민 관심도가 높은 현안

**중(中) - 중점 검토 대상**  
- 예산 효율성 개선이 필요한 사안
- 정책 효과성 검증이 필요한 분야
- 타 기관과의 중복/연계 문제
- 제도 개선이 필요한 영역

**하(低) - 일반 점검 사항**
- 일반적인 업무 현황 보고
- 참고용 통계 및 데이터
- 기존 지적사항 개선 현황

### B. 주제별 카테고리 분류

1. **예산/재정 관리**
   - 예산 편성의 적정성
   - 집행 과정의 투명성
   - 성과와 예산의 연계성

2. **정책 효과성**
   - 정책 목표 달성도
   - 국민 체감 효과
   - 부작용 및 개선점

3. **사업 관리**
   - 사업 추진 체계
   - 성과 지표 관리
   - 민간위탁 관리

4. **조직/인사 관리**
   - 조직 운영 효율성
   - 인사 관리 적정성
   - 공무원 역량 개발

5. **법령/제도 준수**
   - 관련 법령 준수 여부
   - 제도 개선 필요성
   - 규제 합리화

### C. 감사 방향별 분류

**추궁형 질의** (문제점 지적)
- 명백한 오류나 문제점이 있는 사안
- 책임 소재를 묻는 질의
- 개선 대책을 강하게 요구하는 사안

**정책형 질의** (대안 제시)
- 정책 방향성을 논의하는 사안  
- 제도 개선을 건설적으로 제안하는 질의
- 미래 발전 방안을 모색하는 사안

**현황형 질의** (정보 확인)
- 단순 현황 파악이 필요한 사안
- 통계나 데이터 확인 질의
- 향후 계획 청취

## 3단계: 우선순위 설정 매트릭스

각 문서/이슈를 다음 기준으로 점수화 (1-5점):

| 기준 | 가중치 | 평가 요소 |
|------|--------|-----------|
| **파급력** | 30% | 국민 생활 영향도, 언론 관심도 |
| **개선가능성** | 25% | 현실적 해결 방안 존재 여부 |
| **증거 충분성** | 25% | 구체적 근거자료 확보 정도 |
| **정치적 효과** | 20% | 의정활동 성과 가시성 |

**총점 계산**: 각 기준별 점수 × 가중치의 합계

## 4단계: 최종 분류 결과 출력

### 📊 분류 결과 요약표

| 순위 | 제목 | 중요도 | 주제 | 감사방향 | 총점 | 핵심 이슈 |
|------|------|--------|------|----------|------|-----------|
| 1 | [제목] | 상 | 예산/재정 | 추궁형 | 4.2 | [핵심 문제점] |
| 2 | [제목] | 상 | 정책효과성 | 정책형 | 4.0 | [핵심 문제점] |
| ... | ... | ... | ... | ... | ... | ... |

### 🎯 즉시 검토 필요 사항 (상위 5개)
각 항목에 대해:
- **핵심 문제점**: [간단 요약]
- **예상 질의 포인트**: [구체적 질문 예시]
- **필요 추가 자료**: [요구할 자료 목록]
- **법적 근거**: [관련 법령 조항]

### 📋 중점 검토 대상 (상위 6-15위)
- 항목별 간단 요약과 검토 방향

### 📝 참고 사항 (나머지)
- 일반 점검 사항 목록

## 5단계: 후속 조치 가이드

### 추가 분석이 필요한 사항
- 교차 검증이 필요한 데이터
- 타 기관 자료와 비교 분석할 항목
- 전문가 자문이 필요한 기술적 사안

### 자료 요구 우선순위
1. **1순위**: 즉시 검토 사항 관련 상세 자료
2. **2순위**: 중점 검토 대상의 보완 자료  
3. **3순위**: 일반 참고용 추가 정보

---

**사용 가이드**: 
1. 문서를 업로드하거나 내용을 입력하고 기본 정보를 제공하세요
2. AI가 체계적으로 분류하고 우선순위를 매겨 결과를 제시합니다
3. 분류 결과를 바탕으로 국정감사 전략을 수립하세요
4. 필요시 특정 항목에 대한 심화 분석을 추가 요청할 수 있습니다`,
    category: 'analysis',
    usageHours: 0,
    isFavorite: false,
    tags: ['국정감사', '문서분류', '자동화', '우선순위', '분석도구'],
  },

  {
    title: '부처별 이슈 매핑 도구',
    description: '특정 부처/기관의 핵심 현안과 감사 포인트를 도출하고, 부처 특성에 맞는 질의 전략을 제시하는 전문 도구',
    content: `# 부처별 이슈 매핑 도구

**역할**: 당신은 각 정부 부처의 고유 업무와 특성을 잘 아는 국정감사 전략 전문가입니다. 부처별 핵심 현안을 파악하고 효과적인 감사 포인트를 도출합니다.

## 1단계: 부처 기본 정보 설정

**감사 대상 부처/기관**: [부처명 입력]

**주요 소관 업무**: [해당 부처의 핵심 업무 영역]

**올해 중점 추진 정책**: [2024-2025년 주요 정책/사업]

**관련 예산 규모**: [해당 부처 총예산 및 주요 사업 예산]

**최근 이슈/논란**: [언론 보도나 사회적 관심사항]

## 2단계: 부처별 특성 분석

### A. 부처 업무 특성별 감사 포인트

**정책 기획 중심 부처** (기재부, 총리실 등)
- 정책 조정 기능의 실효성
- 부처 간 협업 체계 점검
- 정책 일관성 및 연속성

**사업 실행 중심 부처** (국토부, 산업부 등)  
- 대규모 사업의 추진 체계
- 예산 집행의 효율성
- 성과 관리 시스템

**규제/감독 중심 부처** (금융위, 방통위 등)
- 규제의 합리성 및 실효성
- 감독 기능의 적정성
- 업계와의 소통 체계

**서비스 제공 중심 부처** (복지부, 교육부 등)
- 국민 서비스 품질
- 사각지대 해소 노력
- 전달 체계의 효율성

### B. 부처별 고유 리스크 요소

**예산 관련 리스크**
- 대규모 사업 추진 시 예산 낭비 위험
- 성과 저조 사업의 지속 추진
- 불용액 발생 원인

**정책 관련 리스크**  
- 정책 목표와 현실의 괴리
- 관련 부처 간 정책 충돌
- 기존 정책과의 일관성 부족

**관리 관련 리스크**
- 산하기관 관리 감독 소홀
- 민간위탁 관리 미흡
- 인허가 과정의 투명성

## 3단계: 현안별 이슈 매핑

### 🎯 핵심 현안 분석 (상위 3개)

**현안 1**: [제목]
- **배경**: [이슈 발생 배경과 경위]
- **현재 상황**: [추진 현황 및 문제점]
- **쟁점**: [주요 논란이나 비판점]
- **감사 포인트**: [집중해야 할 질의 방향]
- **예상 답변**: [부처에서 예상되는 해명]
- **재반박 논리**: [추가 질의 방향]

**현안 2**: [제목]
[동일한 형식으로 분석]

**현안 3**: [제목]
[동일한 형식으로 분석]

### 📊 부처별 성과 지표 점검

**정량적 지표**
- 주요 KPI 달성률 분석
- 예산 대비 성과 효율성
- 국민 만족도 조사 결과

**정성적 지표**  
- 정책 체감도
- 이해관계자 평가
- 언론 및 시민사회 반응

## 4단계: 질의 전략 수립

### A. 부처 특성별 질의 스타일

**장관 성향별 접근**
- 전문가 출신: 기술적/전문적 질의 중심
- 정치인 출신: 정치적 판단력 검증
- 관료 출신: 행정 체계와 절차 점검

**부처 문화별 접근**
- 보수적 부처: 점진적 개선 방안 제시
- 혁신적 부처: 과감한 변화 요구
- 기술 중심 부처: 데이터와 근거 기반 질의

### B. 효과적인 질의 시나리오

**도입부 질의** (분위기 조성)
- 부처의 기본 현황 확인
- 올해 주요 성과 언급
- 긍정적 측면 인정

**핵심 질의** (본격적 추궁)
- 구체적 사실과 수치 제시
- 명확한 문제점 지적  
- 개선 방안 요구

**마무리 질의** (대안 제시)
- 건설적 개선 방향 제안
- 향후 추진 의지 확인
- 후속 점검 계획 언급

## 5단계: 질의서 구성 가이드

### 📝 질의서 기본 구조

**1. 질의 배경**
- 해당 정책/사업의 중요성
- 국민적 관심도
- 감사의 필요성

**2. 현황 및 문제점**
- 구체적 사실과 데이터
- 문제점 분석
- 타 기관과의 비교

**3. 질의 사항**
- 단계적이고 논리적 질문 구성
- 예상 답변에 대한 재질의 준비
- 명확한 개선 요구

**4. 첨부 자료**
- 관련 통계 및 보고서
- 비교 분석 자료
- 언론 보도 자료

### 🎯 부처별 맞춤형 질의 예시

**[선택된 부처]에 대한 핵심 질의안**

1. **[현안 1] 관련 질의**
   - 기본 질문: [현황 파악]
   - 심화 질문: [문제점 지적]
   - 대안 질문: [개선 방안]

2. **[현안 2] 관련 질의**
   - 기본 질문: [현황 파악]
   - 심화 질문: [문제점 지적]  
   - 대안 질문: [개선 방안]

3. **[현안 3] 관련 질의**
   - 기본 질문: [현황 파악]
   - 심화 질문: [문제점 지적]
   - 대안 질문: [개선 방안]

## 6단계: 추가 자료 요구 목록

### 필수 요구 자료
- 해당 부처 주요 정책/사업 추진 현황
- 예산 집행 내역 및 성과 보고서
- 관련 통계 및 성과 지표
- 민원 및 갈등 현황

### 선택 요구 자료  
- 타 부처와의 협업 현황
- 산하기관 관리 현황
- 전문가/시민사회 의견 수렴 결과

---

**사용 가이드**:
1. 감사할 부처를 선정하고 기본 정보를 입력하세요
2. AI가 해당 부처의 특성과 현안을 분석하여 매핑해드립니다  
3. 제시된 이슈 매핑을 바탕으로 질의 전략을 수립하세요
4. 구체적인 질의안은 추가 대화를 통해 정교화할 수 있습니다`,
    category: 'analysis', 
    usageHours: 0,
    isFavorite: false,
    tags: ['국정감사', '부처별분석', '이슈매핑', '질의전략', '정부부처'],
  },

  {
    title: 'AI 도구 선택 가이드',
    description: '국정감사 업무별로 최적화된 AI 도구를 추천하고, 각 도구의 활용법과 주의사항을 제시하는 실무 가이드',
    content: `# 국정감사 업무별 AI 도구 선택 가이드

**역할**: 당신은 다양한 AI 도구들의 특성을 잘 아는 디지털 전환 전문가입니다. 국정감사 실무진이 업무별로 가장 적합한 AI 도구를 선택할 수 있도록 도와드립니다.

## 1단계: 업무 유형 및 요구사항 파악

**수행하려는 업무**: [구체적인 업무 내용 입력]

**처리해야 할 자료 유형**: 
- [ ] 텍스트 문서 (보고서, 회의록 등)
- [ ] 수치 데이터 (통계, 예산자료 등)  
- [ ] 이미지/차트 (그래프, 도표 등)
- [ ] 동영상/음성 (회의 영상, 인터뷰 등)
- [ ] 코드/기술 문서

**자료의 양과 복잡도**:
- [ ] 소량 (10페이지 이하)
- [ ] 중량 (10-100페이지)  
- [ ] 대량 (100페이지 이상)
- [ ] 복합 (여러 형태 혼합)

**보안 요구사항**:
- [ ] 공개 정보 (보안 무관)
- [ ] 내부 자료 (주의 필요)
- [ ] 민감 정보 (높은 보안 필요)

**예산 및 시간 제약**:
- [ ] 무료 도구만 사용 가능
- [ ] 유료 도구 사용 가능
- [ ] 긴급 (즉시 결과 필요)
- [ ] 여유 (시간적 여유 있음)

## 2단계: 업무별 최적 AI 도구 매칭

### 📝 문서 요약 및 분석

**ChatGPT-4 (OpenAI)**
- **최적 용도**: 복잡한 논리 분석, 창의적 아이디어 생성
- **장점**: 풍부한 설명, 논리적 추론 능력 뛰어남
- **단점**: 때로 장황함, 팩트체크 필요
- **추천 상황**: 정책 분석, 질의서 초안 작성, 브레인스토밍
- **비용**: $20/월 (Plus), 기업용 별도
- **보안**: Team/Enterprise에서 데이터 학습 미사용 옵션

**Claude (Anthropic)**  
- **최적 용도**: 대용량 문서 분석, 정확한 요약
- **장점**: 200K+ 토큰 처리, 안전하고 윤리적 답변
- **단점**: 상대적으로 창의성 부족, 한국 정보 제한
- **추천 상황**: 긴 보고서 요약, 여러 문서 교차 분석
- **비용**: 무료 체험 가능, Pro $20/월
- **보안**: 강화된 보안 옵션 제공

**Gemini (Google)**
- **최적 용도**: 멀티모달 분석 (텍스트+이미지+차트)
- **장점**: 구글 생태계 연동, 시각자료 분석 탁월
- **단점**: 아직 한국어 최적화 부족
- **추천 상황**: 복합 자료 분석, 차트/그래프 포함 보고서
- **비용**: 구글 Workspace 연동
- **보안**: 구글 기업용 보안 체계

### 📊 데이터 분석 및 시각화

**ChatGPT Advanced Data Analysis**
- **최적 용도**: 데이터 분석, 코드 생성, 차트 작성
- **장점**: Python 코드 실행, 실시간 분석
- **단점**: 복잡한 통계 분석 한계
- **추천 상황**: 예산 데이터 분석, 통계 처리, 그래프 생성

**Claude with Artifacts**
- **최적 용도**: 구조화된 분석 보고서 생성
- **장점**: 체계적 분석 결과물, 시각적 정리
- **단점**: 실시간 데이터 처리 제한

**Perplexity AI**
- **최적 용도**: 실시간 정보 검색, 최신 데이터 확인
- **장점**: 웹 검색 연동, 출처 명시
- **단점**: 심화 분석 능력 제한
- **추천 상황**: 최신 정책 동향 파악, 팩트체크

### 🎤 회의록 작성 및 음성 처리

**Otter.ai**
- **최적 용도**: 영어 회의 실시간 전사
- **장점**: 높은 정확도, 화자 구분
- **단점**: 한국어 지원 제한

**Whisper (OpenAI)**  
- **최적 용도**: 다국어 음성을 텍스트로 변환
- **장점**: 무료 사용 가능, 높은 정확도
- **단점**: 기술적 설정 필요

**Clova Note**
- **최적 용도**: 한국어 회의록 자동 생성
- **장점**: 한국어 특화, 네이버 생태계
- **단점**: 기능 제한적

### 🔍 정보 검색 및 팩트체크

**Perplexity Pro**
- **최적 용도**: 실시간 정보 검색, 출처 확인
- **장점**: 최신 정보, 신뢰할 수 있는 출처
- **추천 상황**: 정책 동향 파악, 해외 사례 조사

**ChatGPT with Web Browsing**
- **최적 용도**: 복합적 정보 조사
- **장점**: 웹 검색 + 분석 통합
- **추천 상황**: 종합적 현황 파악

## 3단계: 보안 등급별 도구 선택

### 🔐 높은 보안 (민감정보 포함)

**권장 도구**:
- ChatGPT Enterprise (데이터 학습 미사용)
- Claude for Work (보안 강화)  
- 내부 구축 AI 시스템 (있는 경우)

**주의사항**:
- 개인정보, 기밀 제거 후 사용
- 정부/국회 전용 AI 플랫폼 우선 활용
- 입력 내용 최소화, 가명 처리

### 🔒 중간 보안 (내부 자료)

**권장 도구**:  
- 유료 AI 서비스 (Plus, Pro 등급)
- 데이터 학습 옵트아웃 설정
- 대화 기록 정기 삭제

**주의사항**:
- 구체적 인명, 기관명 가명화
- 핵심 수치만 예시로 활용
- 결과물 재검토 필수

### 🔓 일반 보안 (공개 정보)

**권장 도구**:
- 모든 AI 도구 활용 가능
- 무료 버전도 안전하게 사용

**주의사항**:
- 여전히 팩트체크 필요
- 환각 현상 주의

## 4단계: 업무별 최적 도구 조합

### 📋 국정감사 자료 준비 워크플로

**1단계: 대량 문서 초벌 요약**
- Claude (200K+ 토큰 처리 능력)
- 여러 문서 동시 업로드, 비교 분석

**2단계: 핵심 쟁점 도출**  
- ChatGPT-4 (논리적 분석)
- 요약 결과를 바탕으로 질의 포인트 추출

**3단계: 데이터 분석**
- ChatGPT Advanced Data Analysis
- 통계 처리 및 시각화

**4단계: 질의서 작성**
- ChatGPT-4 또는 Claude
- 논리적 구조와 설득력 있는 문장 구성

**5단계: 팩트체크**
- Perplexity AI
- 주요 사실 관계 검증

### 🎯 효율적인 도구 조합 전략

**동시 활용 (교차 검증)**
- 같은 질문을 2개 도구에 동시 질의
- 결과 비교를 통한 신뢰도 향상
- 상호 보완적 특성 활용

**순차 활용 (단계별 심화)**  
- 1차: Claude로 대량 요약
- 2차: ChatGPT로 쟁점 분석  
- 3차: Perplexity로 팩트체크

## 5단계: 맞춤형 도구 추천

**귀하의 요구사항을 바탕으로 한 최적 도구 조합**:

[입력된 업무와 요구사항에 따라 맞춤형 추천 제시]

**1순위 추천**: [도구명]
- **선택 이유**: [구체적 이유]
- **활용 방법**: [단계별 사용법]  
- **주의사항**: [보안 및 정확성 관련]

**2순위 추천**: [도구명]  
- **선택 이유**: [구체적 이유]
- **활용 방법**: [단계별 사용법]
- **주의사항**: [보안 및 정확성 관련]

**보완 도구**: [도구명]
- **활용 목적**: [특정 용도]
- **사용 시점**: [언제 활용할지]

### 💡 실무 활용 팁

**효율성 극대화**:
- 프롬프트 템플릿 미리 준비
- 자주 쓰는 질문 패턴 저장
- 도구별 장단점 숙지

**정확성 보장**:
- 항상 최소 2개 도구로 교차 확인
- 중요 정보는 원문 대조
- 수치와 고유명사 별도 검증

**보안 유지**:
- 민감 정보 가명 처리  
- 정기적 대화 기록 삭제
- 기관 정책 준수

---

**사용 가이드**:
1. 수행할 업무와 자료 유형, 보안 요구사항을 입력하세요
2. AI가 최적의 도구 조합을 추천해드립니다
3. 제시된 워크플로를 따라 업무를 진행하세요  
4. 도구 사용 중 문제가 생기면 추가 상담을 요청하세요`,
    category: 'development',
    usageHours: 0,
    isFavorite: false,
    tags: ['AI도구', '업무최적화', '도구선택', '워크플로', '국정감사'],
  },
];

// 데이터베이스에 프롬프트 추가하는 함수
async function addPromptsToDatabase() {
  console.log('🚀 국정감사 전용 프롬프트 추가 시작...');
  
  let successCount = 0;
  let failCount = 0;

  for (const prompt of AUDIT_PROMPTS) {
    try {
      await PromptService.createPrompt(prompt);
      console.log(`✅ 추가 완료: ${prompt.title}`);
      successCount++;
    } catch (error) {
      console.error(`❌ 추가 실패: ${prompt.title}`, error);
      failCount++;
    }
  }

  console.log(`\n📊 추가 결과: 성공 ${successCount}개, 실패 ${failCount}개`);
  
  if (successCount > 0) {
    console.log('🎉 국정감사 전용 프롬프트가 성공적으로 추가되었습니다!');
  }
}

// 스크립트 실행
addPromptsToDatabase().catch(console.error);